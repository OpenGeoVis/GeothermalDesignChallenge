.. note::
    :class: sphx-glr-download-link-note

    Click :ref:`here <sphx_glr_download_project_visual-inspection_surface-decimation.py>` to download the full example code
.. rst-class:: sphx-glr-example-title

.. _sphx_glr_project_visual-inspection_surface-decimation.py:


Surface Decimation
~~~~~~~~~~~~~~~~~~

Decimate some of the surfaces to make them more manageable with web renderings
in VTK.js

.. code-block:: default


    import gdc19

    import pandas as pd
    import numpy as np
    import pyvista
    import omfvista
    import PVGeo
    import omf



.. code-block:: default


    surfaces = omfvista.load_project(gdc19.get_project_path('surfaces.omf'))
    topo = surfaces['land_surface']


Decimate Topography Surface


.. code-block:: default


    dec = topo.extract_geometry().decimate(0.99, inplace=False)
    dec.plot(notebook=True, show_edges=True, color=True)


Re-do the texture mapping


.. code-block:: default

    reader = omf.OMFReader(gdc19.get_project_path('surfaces.omf'))
    project = reader.get_project()
    # Assumes 'land_surface' is at index 0
    surf = project.elements[0]
    tex = surf.textures[0]
    print(tex.name)

    og = tex.origin
    pu = tex.axis_u
    pv = tex.axis_v

    dec.texture_map_to_plane(origin=og, point_u=og+pu, point_v=og+pv,
                              inplace=True, name='geo_aer')

    dec.textures['geo_aer'] = pyvista.read_texture(gdc19.get_web_path('geology-aerial-compressed.jpg'))

    dec.plot(texture=True)

    dec.save(gdc19.get_web_path('topo.vtk'))



Decimate Granite Surface


.. code-block:: default


    gran = surfaces['top_granitoid']
    print(gran)



.. code-block:: default

    dec = gran.extract_geometry().decimate(0.99, inplace=False)
    dec.plot(notebook=True, show_edges=True)

    dec.save(gdc19.get_web_path('granite.vtk'))


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.000 seconds)


.. _sphx_glr_download_project_visual-inspection_surface-decimation.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download

     :download:`Download Python source code: surface-decimation.py <surface-decimation.py>`



  .. container:: sphx-glr-download

     :download:`Download Jupyter notebook: surface-decimation.ipynb <surface-decimation.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.readthedocs.io>`_
